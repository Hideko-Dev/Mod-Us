import{p as e,a as t,X as a,M as o,r as s,o as l,c as n,b as i,w as d,d as r,e as u,P as c,D as p,R as g,f as m,g as v,h as b,i as f,t as h,j as y,k as x,l as w,T as k,m as I,F as M,n as _,q as B,s as C,u as D,v as A,x as S,y as R,z as q,A as E,B as V,C as U,E as j}from"./vendor.3682f020.js";const T=window.require("electron").ipcRenderer;const z={name:"TitleBar",components:{XIcon:a,MinusIcon:o},methods:{minimize(){T.send("window:minimize")},close(){window.close()},showMenu(){T.send("window:menu")}}},P=d("data-v-69b0bf3d");e("data-v-69b0bf3d");const K={class:"app__title-bar w-full h-16 bg-gray-800 text-gray-100 flex items-center relative z-10"},F=i("img",{class:"h-9",src:"./icon.png",alt:"The app icon"},null,-1),L=i("div",{class:"flex-grow title-bar__draggable px-1"},[i("span",{class:"text-3xl font-display font-bold"},"Mod Us")],-1),$={class:"flex"};t();const X=P(((e,t,a,o,d,r)=>{const u=s("MinusIcon"),c=s("XIcon");return l(),n("div",K,[i("button",{class:"flex justify-center items-center w-16 h-16 flex-grow-0 cursor-default",onClick:t[1]||(t[1]=e=>r.showMenu())},[F]),L,i("div",$,[i("button",{class:"app__title-button flex justify-center items-center text-3xl w-16 h-16\n               bg-opacity-0 hover:bg-opacity-70 bg-blue-500 transition duration-200",tabindex:"-1",onClick:t[2]||(t[2]=e=>r.minimize())},[i(u,{class:"relative top-2",size:"1x"})]),i("button",{class:"app__title-button flex justify-center items-center text-3xl w-16 h-16\n               bg-opacity-0 hover:bg-opacity-70 bg-red-500 transition duration-200",tabindex:"-1",onClick:t[3]||(t[3]=e=>r.close())},[i(c,{size:"1x"})])])])}));z.render=X,z.__scopeId="data-v-69b0bf3d";const O=r({id:"main",state:()=>({settingsDialogModId:null,mods:[],activeModId:null,showUpdateRequired:!1})}),H=u();const N={name:"ModCard",components:{PlayIcon:c,DownloadIcon:p,RefreshCwIcon:g,XIcon:a},props:{mod:{type:Object,required:!0}},setup(e){const t=O(),a=m(null),o=v((()=>null===e.mod.installedVersion?"not-installed":e.mod.outdated?"outdated":"up-to-date"));b((()=>{f((t=>{if(null===e.mod.notInstallableReason)return;const o=y(a.value,{content:e.mod.notInstallableReason,placement:"bottom",offset:[0,20]});t((()=>{o.destroy()}))}))}));const s=v((()=>null!==e.mod.notInstallableReason||"up-to-date"===o.value&&null!==t.activeModId));return{status:o,actionButton:a,actionButtonDisabled:s,activeModId:h(t,"activeModId"),uninstall(){T.invoke("manager:uninstall",e.mod.id)},async onActionClick(){switch(o.value){case"up-to-date":await T.invoke("manager:start",e.mod.id);break;case"outdated":case"not-installed":!(await T.invoke("manager:install",e.mod.id))&&(t.showUpdateRequired=!0)}},settingsDisabled:v((()=>"up-to-date"!==o.value||t.activeModId===e.mod.id)),actionButtonClasses:v((()=>{const a=[];switch(s.value?a.push("cursor-not-allowed"):a.push("hocus:scale-110","hocus:bg-opacity-100","hocus:ring-1"),o.value){case"up-to-date":a.push("bg-green-400"),null!==t.activeModId&&(a.push("cursor-default"),t.activeModId===e.mod.id&&a.push("cursor-default","scale-110","bg-opacity-100","animate-spin"));break;case"not-installed":a.push("bg-yellow-400");break;case"outdated":a.push("bg-blue-400")}return a}))}}},W=d("data-v-4dfe48b7");e("data-v-4dfe48b7");const Y={class:"bg-gray-800 ring-offset-gray-700 p-4 flex relative"},G={class:"flex-grow flex flex-col"},J={class:"text-2xl"},Q=I("Â  "),Z={key:0,class:"text-xl text-green-400 font-mono"},ee={key:1,class:"text-xl text-red-400 font-mono"},te={key:2,class:"text-xl text-gray-400 font-mono"},ae={class:"block text-1xl"},oe={class:"uppercase font-bold text-blue-400 text-base mt-auto"},se={class:"flex flex-col justify-center items-center space-y-3 pt-2"},le={ref:"actionButton",class:"flex justify-center items-center"};t();const ne=W(((e,t,a,o,d,r)=>{const u=s("PlayIcon"),c=s("RefreshCwIcon"),p=s("DownloadIcon"),g=s("XIcon");return l(),n("div",Y,[i("div",G,[i("div",null,[i("span",J,x(a.mod.title),1),Q,"up-to-date"===o.status?(l(),n("span",Z,"v"+x(a.mod.installedVersion),1)):"outdated"===o.status?(l(),n("span",ee,"update required")):"not-installed"===o.status?(l(),n("span",te,"not installed")):w("",!0)]),i("span",ae,"by "+x(a.mod.author),1),i("div",oe,[i("a",{class:"focus:outline-none focus-visible:underline text-sm",href:a.mod.projectURL},"Website",8,["href"])])]),i("div",se,[i("div",le,[i("button",{class:["text-2xl rounded-full p-5 transform-gpu bg-opacity-40 ring-offset-gray-700\n                 transition duration-200 ring-white ring-offset-4",o.actionButtonClasses],disabled:o.actionButtonDisabled,onClick:t[1]||(t[1]=e=>o.onActionClick())},[i(k,{name:"slide",mode:"out-in"},{default:W((()=>["up-to-date"===o.status?(l(),n(u,{key:0,class:"relative left-0.5",size:"1x"})):"outdated"===o.status?(l(),n(c,{key:1,size:"1x"})):"not-installed"===o.status?(l(),n(p,{key:2,size:"1x"})):w("",!0)])),_:1})],10,["disabled"])],512)]),"not-installed"!==o.status?(l(),n("button",{key:0,class:["flex justify-center items-center space-x-1 text-sm p-1\n             transition duration-200 top-1 right-1 absolute",o.activeModId===a.mod.id?"opacity-50 cursor-not-allowed":"hocus:bg-gray-600"],title:"Uninstall",disabled:o.activeModId===a.mod.id,onClick:t[2]||(t[2]=e=>o.uninstall())},[i(g)],10,["disabled"])):w("",!0)])}));N.render=ne,N.__scopeId="data-v-4dfe48b7";const ie={name:"ModsList",components:{ModCard:N},setup(){const e=O();return{mods:h(e,"mods")}}},de=d("data-v-c9553d7a");e("data-v-c9553d7a");const re={class:"overflow-hidden relative"},ue=i("div",{class:"bg-black shadow-2xl absolute -top-24 -left-4 -right-4 h-20 mods-list__shadow"},null,-1),ce={class:"space-y-2 overflow-y-auto pt-2 h-full"};t();const pe=de(((e,t,a,o,d,r)=>{const u=s("ModCard");return l(),n("div",re,[ue,i("div",ce,[(l(!0),n(M,null,_(o.mods,(e=>(l(),n(u,{key:e.id,mod:e},null,8,["mod"])))),128))])])}));ie.render=pe,ie.__scopeId="data-v-c9553d7a";const ge=e=>{try{-1!==e.getAttribute("tabindex")&&e.focus()}catch(t){}return document.activeElement===e},me=e=>[...e.children].flatMap((e=>[...me(e),e])),ve=e=>[...e.childNodes.values()].some((e=>ge(e)||ve(e))),be=e=>[...e.childNodes.values()].reverse().some((e=>ge(e)||be(e))),fe=[];window.addEventListener("keydown",(e=>{0!==fe.length&&"Escape"===e.key&&(fe[0].close(),e.stopPropagation())}));const he={name:"ModalDialog",inheritAttrs:!1,props:{title:{type:String,required:!0},closable:Boolean,modelValue:Boolean},emits:["update:modelValue","close"],setup(e,{emit:t}){const{modelValue:o}=B(e),s=m(null),l=m(null),n=()=>{e.closable&&(t("update:modelValue",!1),t("close"))},i={close:n};return C([s,o],(()=>{var e,t;null!==s.value&&(e=s.value,t=o.value,me(e).forEach((e=>{if(t){const t=e.dataset.originalTabindex;void 0===t?e.removeAttribute("tabindex"):e.setAttribute("tabindex",t),e.removeAttribute("data-original-tabindex")}else{if(void 0!==e.dataset.originalTabindex)return;const t=e.getAttribute("tabindex");null!==t&&(e.dataset.originalTabindex=t),e.setAttribute("tabindex","-1")}}))),o.value?(fe.unshift(i),ve(l.value)):fe.splice(fe.indexOf(i),1)}),{immediate:!0}),{dialogElement:s,dialogContentAndButtonsElement:l,active:o,XIcon:a,titleID:D(),close:n,onFocusBefore(){be(s.value)},onFocusAfter(){ve(s.value)}}}},ye=d("data-v-16f94ebd");e("data-v-16f94ebd");const xe={class:"mb-6"},we=i("div",{class:"h-px w-1/2 mx-auto mt-4 bg-gray-300"},null,-1),ke={ref:"dialogContentAndButtonsElement"},Ie={key:0,class:"mt-5 flex justify-end"};t();const Me=ye(((e,t,a,o,s,d)=>(l(),n(R,{to:"body"},[i("div",{class:["bg-black fixed top-0 left-0 w-screen h-screen flex justify-center items-center p-10 transition\n             duration-200",o.active?"bg-opacity-70 pointer-events-auto":"bg-opacity-0 pointer-events-none"],onMousedown:t[4]||(t[4]=S((e=>o.close()),["self"]))},[i("div",{tabindex:o.active?0:-1,onFocus:t[1]||(t[1]=e=>o.onFocusBefore())},null,40,["tabindex"]),i("div",{ref:"dialogElement",role:"dialog",class:["transition duration-200 transform bg-gray-800 rounded-md shadow-lg p-5 relative shadow-xl",o.active?"opacity-100 scale-100":"opacity-0 scale-95"],"aria-labelledby":o.titleID,"aria-modal":o.active.toString()},[i(k,{name:"fade"},{default:ye((()=>[a.closable?(l(),n("button",{key:0,class:"absolute -right-3 -top-3 bg-gray-800 shadow-md rounded-full p-2 transition hocus:bg-gray-600\n                 focus:outline-none","aria-label":"Close",onClick:t[2]||(t[2]=e=>o.close())},[i(o.XIcon,{size:"1.5x"})])):w("",!0)])),_:1}),i("header",xe,[i("div",{id:o.titleID,class:"text-2xl font-bold text-center px-3"},x(a.title),9,["id"]),we]),i("div",ke,[i("div",null,[A(e.$slots,"default")]),e.$slots.buttons?(l(),n("div",Ie,[A(e.$slots,"buttons")])):w("",!0)],512)],10,["aria-labelledby","aria-modal"]),i("div",{tabindex:o.active?0:-1,onFocus:t[3]||(t[3]=e=>o.onFocusAfter())},null,40,["tabindex"])],34)]))));he.render=Me,he.__scopeId="data-v-16f94ebd";const _e={name:"KInput",inheritAttrs:!1,props:{modelValue:{type:String,default:""},label:{type:String,required:!0},type:{type:String,default:"text"},errorMessage:{type:null,default:null,validate:e=>null===e||"string"==typeof e},autocomplete:{type:String,default:"off"},showErrorMessage:Boolean,disabled:Boolean,required:Boolean},emits:["update:modelValue"],setup(e){const{type:t}=B(e),a=m(!1),o=m(null),s=m(null),l=m(null),n=v((()=>l.value.getBoundingClientRect().height+5+"px"));let i=!1;return{inputElement:o,passwordButtonElement:s,errorMessageFakeElement:l,showPassword:a,errorMessageHeight:n,onBlur(){setTimeout((()=>{i=document.activeElement===s.value,i||(a.value=!1)}),0)},toggleShowPassword(){a.value=!a.value,i&&(i=!1,q((()=>{const e=o.value.value.length;o.value.setSelectionRange(e,e),o.value.focus()})))},realID:D(),realType:v((()=>"password"===t.value?a.value?"text":"password":t.value)),inputClasses:v((()=>{const a=[];return"password"===t.value&&a.push("pr-14"),e.disabled&&a.push("cursor-not-allowed"),a})),focus(){o.value.focus()}}}},Be={class:"flex items-center"},Ce={key:0,class:"text-xs"};_e.render=function(e,t,a,o,s,d){return l(),n("div",{class:["relative group focus-within:opacity-100 transition duration-200",a.disabled?"opacity-50":"opacity-80"]},[i("div",Be,[i("label",{for:o.realID,class:"block text-md mb-1 text-gray-100"},[I(x(a.label)+" ",1),a.required?(l(),n("span",Ce,"(Required)")):w("",!0)],8,["for"])]),i("input",E(e.$attrs,{id:o.realID,ref:"inputElement",class:["border border-gray-500 rounded-md w-full h-10 px-3 transition duration-200 placeholder-gray-600\n             bg-transparent focus:ring-0 focus:border-white focus:outline-none",o.inputClasses],type:o.realType,autocomplete:a.autocomplete,disabled:a.disabled,value:a.modelValue,required:a.required,onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value)),onBlur:t[2]||(t[2]=e=>o.onBlur())}),null,16,["id","type","autocomplete","disabled","value","required"]),"password"===a.type?(l(),n("button",{key:0,ref:"passwordButtonElement",class:"text-blue-600 text-sm text-opacity-70 transition-colors block absolute top-10 right-3 transform\n             hover:text-opacity-100 focus:text-opacity-100 focus:outline-none focus-visible:underline",type:"button",disabled:a.disabled,"aria-label":o.showPassword?"Hide password":"Show password as plain text. This will display your password on the screen.",onClick:t[3]||(t[3]=e=>o.toggleShowPassword())},x(o.showPassword?"Hide":"Show"),9,["disabled","aria-label"])):w("",!0),i("div",{class:"text-red-600 text-sm error-message overflow-hidden pt-1 pl-0.5",style:{height:a.showErrorMessage?o.errorMessageHeight:0}},x(a.errorMessage),5),i("div",{ref:"errorMessageFakeElement","aria-hidden":"true",class:"absolute text-sm invisible overflow-hidden pl-0.5"},x(a.errorMessage),513)],2)};var De={name:"KRipple",props:{disabled:Boolean,on:{type:String,default:"black",validate:e=>"black"===e||"white"===e}},setup(){const e=m(null);return{el:m(null),position:e,onRipple(t,a){const{x:o,y:s}=this.el.parentElement.getBoundingClientRect();e.value=[t-o,a-s]}}},methods:{trigger(e){this.onRipple(e.pageX,e.pageY)}}};const Ae=d("data-v-441549c9")(((e,t,a,o,s,i)=>(l(),n("div",{ref:"el",class:["k-ripple__ripple","white"===a.on?"bg-black bg-opacity-10":"bg-white bg-opacity-30"],"data-show":null!==o.position,style:null===o.position?{}:{left:o.position[0]+"px",top:o.position[1]+"px"},onAnimationend:t[1]||(t[1]=e=>o.position=null)},null,46,["data-show"]))));De.render=Ae,De.__scopeId="data-v-441549c9";const Se={name:"KButton",components:{KRipple:De},props:{variant:{type:String,default:"default",validate:e=>["default","primary"].includes(e)},type:{type:String,default:"button"},icon:{type:null,default:null},disabled:Boolean,loading:Boolean},emits:["ripple","click"],computed:{buttonClasses(){const e=[];if(this.loading)e.push("text-opacity-0","cursor-wait");else if(this.disabled)return e.push("cursor-not-allowed","bg-gray-900","text-gray-500"),e;switch(this.variant){case"default":e.push("text-gray-300"),this.loading||(this.disabled?e.push("text-opacity-50"):e.push("hover:border-white"));break;case"primary":e.push("text-white","bg-black","shadow-lg"),this.loading||(this.disabled?e.push("bg-opacity-80","text-opacity-80"):e.push("hover:bg-opacity-90"))}return e},loaderClasses:e=>e.loading?["opacity-100","duration-500"]:["opacity-0"]},methods:{onClick(e){this.disabled||this.loading||(this.$refs.ripple.trigger(e),this.$emit("click",e))}}},Re=d("data-v-d9ed3ed0");e("data-v-d9ed3ed0");const qe={class:"flex items-center justify-center flex-grow whitespace-nowrap"},Ee={class:"flex justify-center items-center absolute top-0 left-0 bottom-0 right-0 pointer-events-none"},Ve=i("span",{class:"bg-white block"},null,-1);t();const Ue=Re(((e,t,a,o,d,r)=>{const u=s("KRipple");return l(),n("button",{class:["k-button rounded-md text-md border-gray-400 border px-4 py-2 transition duration-200 ring-black ring-offset-2\n           relative overflow-hidden focus:outline-none flex items-center focus-visible:ring-2 text-white w-24",r.buttonClasses],type:a.type,disabled:a.disabled||a.loading,onClick:t[1]||(t[1]=e=>r.onClick(e))},[a.icon?(l(),n(V(a.icon),{key:0,class:"mr-2",size:"20"})):w("",!0),i("span",qe,[A(e.$slots,"default")]),i("span",Ee,[i("span",{class:["loader bg-gray-500 transition-opacity duration-100",r.loaderClasses]},[Ve],2)]),i(u,{ref:"ripple",on:"primary"===a.variant?"white":"black"},null,8,["on"])],10,["type","disabled"])}));Se.render=Ue,Se.__scopeId="data-v-d9ed3ed0";const je={name:"ModSettingsDialog",components:{KButton:Se,KInput:_e,ModalDialog:he},setup(){const e=O(),t=m(null),a=m(!1),o=U({customServerAddress:""});return f((()=>{var a;null!==e.settingsDialogModId&&(t.value=e.mods.find((t=>t.id===e.settingsDialogModId)),o.customServerAddress=null!=(a=t.value.customServerAddress)?a:"")})),{loading:a,data:o,active:v((()=>null!==e.settingsDialogModId)),mod:t,close(){e.settingsDialogModId=null},async save(){a.value=!0,await T.invoke("manager:set-custom-server-address",t.value.id,""===o.customServerAddress?null:o.customServerAddress),this.close(),a.value=!1}}}},Te=d("data-v-22fb40ea");e("data-v-22fb40ea");const ze=I(" Save ");t();const Pe=Te(((e,t,a,o,d,r)=>{var u;const c=s("KInput"),p=s("KButton"),g=s("ModalDialog");return l(),n(g,{closable:"",title:`Settings: ${null==(u=o.mod)?void 0:u.title}`,"model-value":o.active,onClose:t[3]||(t[3]=e=>o.close())},{default:Te((()=>[i(c,{label:"Custom Server Address",modelValue:o.data.customServerAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>o.data.customServerAddress=e)},null,8,["modelValue"])])),buttons:Te((()=>[i(p,{loading:o.loading,onClick:t[2]||(t[2]=e=>o.save())},{default:Te((()=>[ze])),_:1},8,["loading"])])),_:1},8,["title","model-value"])}));je.render=Pe,je.__scopeId="data-v-22fb40ea";const Ke={name:"LoadingOverlay",props:{text:{type:String,default:null,validate:e=>"string"==typeof e||null===e}}},Fe=d("data-v-27be8103");e("data-v-27be8103");const Le={class:"font-display text-3xl"};t();const $e=Fe(((e,t,a,o,s,d)=>(l(),n("div",{class:["fixed top-0 left-0 w-screen h-screen flex flex-col justify-center items-center space-y-10 bg-gray-900\n           transition duration-400",null===a.text?"opacity-0 pointer-events-none":"opacity-100"]},[i("img",{class:["h-32",null===a.text?"":"animate-spin"],src:"./icon.png",alt:"Application icon",draggable:"false"},null,2),i("span",Le,x(a.text)+"...",1)],2))));Ke.render=$e,Ke.__scopeId="data-v-27be8103";const Xe={name:"ProgressModal",components:{ModalDialog:he},setup(){const e=U({text:"",title:"",active:!1});return T.on("manager:progress",((t,{text:a,title:o,finished:s})=>{e.active=!s,e.text=a,e.title=o})),e}},Oe=d("data-v-a4e0c9ca");e("data-v-a4e0c9ca");const He={class:"text-center font-bold"};t();const Ne=Oe(((e,t,a,o,d,r)=>{const u=s("ModalDialog");return l(),n(u,{modelValue:e.active,"onUpdate:modelValue":t[1]||(t[1]=t=>e.active=t),title:e.title},{default:Oe((()=>[i("div",He,x(e.text),1)])),_:1},8,["modelValue","title"])}));Xe.render=Ne,Xe.__scopeId="data-v-a4e0c9ca";const We={name:"UpdateRequiredDialog",components:{KButton:Se,ModalDialog:he},setup:()=>({store:O(),update(){T.send("window:show-releases")}})},Ye=d("data-v-87d5cd20");e("data-v-87d5cd20");const Ge=i("div",{class:"text-center font-bold w-64"}," An update is required for installing this mod. ",-1),Je=I(" Update ");t();const Qe=Ye(((e,t,a,o,d,r)=>{const u=s("KButton"),c=s("ModalDialog");return l(),n(c,{modelValue:o.store.showUpdateRequired,"onUpdate:modelValue":t[2]||(t[2]=e=>o.store.showUpdateRequired=e),title:"Update Required",closable:""},{default:Ye((()=>[Ge])),buttons:Ye((()=>[i(u,{onClick:t[1]||(t[1]=e=>o.update())},{default:Ye((()=>[Je])),_:1})])),_:1},8,["modelValue"])}));We.render=Qe,We.__scopeId="data-v-87d5cd20";const Ze={name:"App",components:{UpdateRequiredDialog:We,ProgressModal:Xe,LoadingOverlay:Ke,ModSettingsDialog:je,ModsList:ie,TitleBar:z},setup(){const e=m(null),t=O();e.value="Loading mods";const a=a=>{t.mods=a,e.value=null};return T.on("manager:mods-updated",((e,t)=>a(t))),T.on("manager:game-started",((e,a)=>{t.activeModId=a})),T.on("manager:game-stopped",(()=>{t.activeModId=null})),T.invoke("manager:get-mods").then((e=>{e.length>0&&a(e)})),{loadingText:e}}},et=d("data-v-262352b8");e("data-v-262352b8");const tt={class:"flex flex-col overflow-hidden h-screen"},at={class:"overflow-hidden flex flex-col"},ot=i("p",{class:"px-3 text-sm py-2"}," Powered by Team LaunchPad & Hideko ",-1),st=i("div",{class:"teleport-target"},null,-1);t();const lt=et(((e,t,a,o,d,r)=>{const u=s("TitleBar"),c=s("ModsList"),p=s("ModSettingsDialog"),g=s("ProgressModal"),m=s("UpdateRequiredDialog"),v=s("LoadingOverlay");return l(),n("div",tt,[i(u),i("main",at,[ot,i(c),st]),i(p),i(g),i(m),i(v,{text:o.loadingText},null,8,["text"])])}));Ze.render=lt,Ze.__scopeId="data-v-262352b8",j(Ze).use(H).mount("#app");
